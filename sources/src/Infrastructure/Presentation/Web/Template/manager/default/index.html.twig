{% extends 'manager/layout.html.twig' %}

{% block content %}
    <div class="p-4">
            <div class="container-fluid">
                <!-- Header -->
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <div class="w-100">
                        <h1 class="h3 mb-1 fw-bold">Support Dashboard</h1>
                        <div class="unread-tickets-alert">
                            <p class="text-secondary mb-0">
                                <i data-lucide="bell" class="text-warning me-1"></i>
                                Welcome back! You have <b>5 unread tickets</b>
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Overall Stats -->
                <div class="row g-4 mb-4">
                    <div class="col-md-3">
                        {{ component('StatusDistribution', { status: constant('App\\Domain\\Ticket\\ValueObject\\TicketStatus::NEW') }) }}
                    </div>
                    <div class="col-md-3">
                        {{ component('StatusDistribution', { status: constant('App\\Domain\\Ticket\\ValueObject\\TicketStatus::IN_PROGRESS') }) }}
                    </div>
                    <div class="col-md-3">
                        {{ component('StatusDistribution', { status: constant('App\\Domain\\Ticket\\ValueObject\\TicketStatus::RESOLVED') }) }}
                    </div>
                    <div class="col-md-3">
                        <div class="stat-card">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <p class="stat-number">15m
                                        <span class="stat-trend trend-up">-2m</span>
                                    </p>
                                    <p class="stat-label">Avg Response</p>
                                </div>
                                <i data-lucide="clock" class="text-primary" style="width: 32px; height: 32px;"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Channels & Priority -->
                <div class="row g-4 mb-4">
                    <div class="col-lg-8">
                        <div class="chart-card">
                            <div class="chart-header mb-4">
                                <h5 class="chart-title">Tickets by Channel</h5>
                            </div>
                            <div class="row g-4">
                                <div class="col-md-4">
                                    {{ component('ChannelDistribution', { channel: constant('App\\Domain\\Ticket\\ValueObject\\TicketChannel::EMAIL') }) }}
                                </div>
                                <div class="col-md-4">
                                    {{ component('ChannelDistribution', { channel: constant('App\\Domain\\Ticket\\ValueObject\\TicketChannel::CHAT') }) }}
                                </div>
                                <div class="col-md-4">
                                    {{ component('ChannelDistribution', { channel: constant('App\\Domain\\Ticket\\ValueObject\\TicketChannel::FORM') }) }}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="chart-card">
                            <div class="chart-header mb-3">
                                <h5 class="chart-title">Priority Distribution</h5>
                            </div>
                            <div class="priority-list">
                                {{ component('PriorityDistribution', { priority: constant('App\\Domain\\Ticket\\ValueObject\\TicketPriority::HIGH') }) }}
                                {{ component('PriorityDistribution', { priority: constant('App\\Domain\\Ticket\\ValueObject\\TicketPriority::MEDIUM') }) }}
                                {{ component('PriorityDistribution', { priority: constant('App\\Domain\\Ticket\\ValueObject\\TicketPriority::LOW') }) }}
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Tickets & Agent Stats -->
                <div class="row g-4">
                    <div class="col-lg-8">
                        <div class="task-list">
                            <div class="task-header">
                                <h5 class="mb-0 fw-semibold">Recent Tickets</h5>
                                <div class="d-flex align-items-center gap-2">
                                    <button class="btn btn-light">All Tickets</button>
                                </div>
                            </div>
                            <div class="task-item">
                                <div class="task-status status-in-progress"></div>
                                <div class="task-content">
                                    <h6 class="task-title">Cannot access my account after password reset</h6>
                                    <p class="task-meta">John Smith • High Priority • 15m ago</p>
                                </div>
                                <span class="badge bg-warning">In Progress</span>
                            </div>
                            <div class="task-item">
                                <div class="task-status status-on-hold"></div>
                                <div class="task-content">
                                    <h6 class="task-title">Integration with third-party service failing</h6>
                                    <p class="task-meta">Sarah Johnson • Medium Priority • 1h ago</p>
                                </div>
                                <span class="badge bg-secondary">On Hold</span>
                            </div>
                            <div class="task-item">
                                <div class="task-status status-done"></div>
                                <div class="task-content">
                                    <h6 class="task-title">Need help with installation process</h6>
                                    <p class="task-meta">Mike Brown • Low Priority • 2h ago</p>
                                </div>
                                <span class="badge bg-success">Resolved</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="user-profile">
                            <img src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=160&h=160&fit=crop&crop=faces"
                                 class="profile-image"
                                 alt="Agent Profile">
                            <h5 class="profile-name">Sarah Parker</h5>
                            <p class="profile-handle">Support Agent</p>
                            <div class="agent-stats mt-4">
                                <div class="row g-3">
                                    <div class="col-6">
                                        <div class="p-3 rounded bg-light">
                                            <h6 class="small text-secondary mb-1">Assigned</h6>
                                            <p class="h4 mb-0">24</p>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="p-3 rounded bg-light">
                                            <h6 class="small text-secondary mb-1">Resolved</h6>
                                            <p class="h4 mb-0">18</p>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <div class="p-3 rounded bg-light">
                                            <h6 class="small text-secondary mb-1">Average Response Time</h6>
                                            <p class="h4 mb-0">12m</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
{% endblock %}
