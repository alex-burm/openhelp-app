<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{% block title %}Welcome!{% endblock %}</title>

        <link rel="stylesheet" href="{{ asset('css/variables.css') }}" />
        <link rel="stylesheet" href="{{ asset('css/styles.css') }}" />
        <link rel="icon" href="{{ asset('favicon.png') }}" />

        {% block stylesheets %}
        {% endblock %}

        <style>
            .hidden {display:none;visibility: hidden}
        </style>
    </head>
    <body data-space-id="{{ workspaceContext.currentWorkspace.id }}">
    <div class="wrapper">
        <div class="overlay"></div>
        {% set menu = block('menu') is defined ? block('menu') : 'dashboard' %}
        <div class="sidebar">
            <a class="logo" href="{{ path('manager_default_index') }}">
                <img src="{{ asset('assets/img/logo.svg') }}" alt="logo">
            </a>
            <nav class="nav">
                <a class="nav__link {{ 'dashboard' == menu ? 'active' }}" href="{{ path('manager_default_index') }}">
                    <i class="icon-dashboard"></i>
                    Dashboard
                </a>
                <a class="nav__link {{ 'requests' == menu ? 'active' }}" href="{{ path('manager_ticket_index') }}">
                    <i class="icon-requests"></i>
                    Requests
{#                    <span class="badge">2</span>#}
                </a>
                <a class="nav__link {{ 'article' == menu ? 'active' }}" href="{{ path('manager_article_index') }}">
                    <i class="icon-knowledge-base"></i>
                    Knowledge base
                </a>
                <a class="nav__link {{ 'agent' == menu ? 'active'}}" href="#">
                    <i class="icon-agent"></i>
                    Agents
                </a>
                <a class="nav__link {{ 'category' == menu ? 'active'}}" href="{{ path('manager_category_index') }}">
                    <i class="icon-settings"></i>
                    Settings
                </a>
                <div class="nav__bot">
                    <a class="nav__link" href="#">
                        <i class="icon-question"></i>
                        Help & Info
                    </a>
                    <a class="nav__link" href="{{ logout_path() }}">
                        <i class="icon-exit"></i>
                        Log out
                    </a>
                </div>
            </nav>
        </div>
        <div class="layout">
            <header class="header">
                {% if block('header') is defined %}
                    <h1 class="header__title">{{ block('header') }}</h1>
                {% endif %}
                <div class="header__right">
                    <form action="#" class="header__form"
                        {{ stimulus_controller('GlobalSearch', {
                            url: path('manager_default_search'),
                            minLength: 2
                        }) }}
                    >
                        <div class="form__row">
                            <i class="icon-search"></i>
                            <input type="text"
                                   class="form__control form__control--xl"
                                   placeholder="Search for anything in the system..."
                                   {{ stimulus_target('GlobalSearch', 'input') }}
                                   autocomplete="off"
                            >
                            <button type="button" class="btn__clear-search" {{ stimulus_target('GlobalSearch', 'clearButton') }}>
                                <i class="icon-cross"></i>
                            </button>
                        </div>
                        <div class="search" {{ stimulus_target('GlobalSearch', 'results') }}></div>
                    </form>
                    <div class="avatar">
                        <span class="avatar__name">
                            Me
                        </span>
                        <i class="icon-profile-agent"></i>
                    </div>
                </div>
            </header>
            <main class="main">
                {% block content %}{% endblock %}
            </main>
        </div>
    </div>
    <script src="{{ asset('js/main.js') }}" type="text/javascript"></script>
    <script src="{{ asset('build/live.js') }}" type="module"></script>
    {% block javascripts %}
    {% endblock %}
    </body>
</html>
